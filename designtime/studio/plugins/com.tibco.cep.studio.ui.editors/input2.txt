		System.debugOut("Executing Rule insertCompanyProfile");
		try{
		        if(XPath.evalAsBoolean("xpath://<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xpath>\n    <expr>$ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID/@xsi:nil = \'true\'\n\tor\ntib:trim($ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID) =\'\'\nor\n$ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__USER__CEO__ID/@xsi:nil !=\'true\'\n\tor\ntib:trim($ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__USER__CEO__ID) !=\'\'\nor\n$ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/APP__NM/@xsi:nil !=\'true\'\n\tor\ntib:trim($ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/APP__NM) !=\'\'\n\n</expr>\n    <namespaces>\n        <namespace URI=\"http://www.w3.org/2001/XMLSchema-instance\" pfx=\"xsi\"/>\n        <namespace URI=\"http://www.tibco.com/bw/xslt/custom-functions\" pfx=\"tib\"/>\n        <namespace URI=\"http://www.w3.org/2001/XMLSchema\" pfx=\"xsd\"/>\n        <namespace URI=\"http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/FileAdapter/wire/FileAdapterConfigurationForWGPR\" pfx=\"xsd2\"/>\n    </namespaces>\n    <variables>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n    </variables>\n</xpath>")){
		            System.debugOut(" Company Id is nil or empty string");
		        }
		        Concepts.CompanyInfo companyInfo= Instance.getByExtId(XPath.evalAsString("xpath://<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xpath>\n    <expr>concat(\n$ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID,\'.\',\n$ev_authorizedapplication/payload/xsd2:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__USER__CEO__ID\n)</expr>\n    <namespaces>\n        <namespace URI=\"http://www.w3.org/2001/XMLSchema\" pfx=\"xsd\"/>\n        <namespace URI=\"http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/FileAdapter/wire/FileAdapterConfigurationForWGPR\" pfx=\"xsd2\"/>\n    </namespaces>\n    <variables>\n        <variable>ev_authorizedapplication</variable>\n        <variable>ev_authorizedapplication</variable>\n    </variables>\n</xpath>"));
		        if(companyInfo==null){
		            companyInfo = Instance.createInstance("xslt://{{/Concepts/CompanyInfo}}<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:ns=\"http://wellsfargo.com/wholesale/portalcaching/authorizations\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:ns1=\"http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/FileAdapter/wire/FileAdapterConfigurationForWGPR\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:tib=\"http://www.tibco.com/bw/xslt/custom-functions\" version=\"1.0\" exclude-result-prefixes=\"xsi ns1 tib xsd ns xsl\">\n    <xsl:output method=\"xml\"/>\n    <xsl:param name=\"ev_authorizedapplication\"/>\n    <xsl:template match=\"/\">\n        <createObject>\n            <object>\n                <xsl:attribute name=\"extId\">\n                    <xsl:value-of select=\"$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID\"/>\n                </xsl:attribute>\n                <companyApplications>\n                    <xsl:attribute name=\"extId\">\n                        <xsl:value-of select=\"concat(&#xA;$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID,\'.\',&#xA;$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__USER__CEO__ID,\'.\',&#xA;$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/APP__NM&#xA;)\"/>\n                    </xsl:attribute>\n                    <xsl:if test=\"not(($ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/APP__NM/@xsi:nil=(&quot;true&quot;)) or ($ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/APP__NM/@xsi:nil=(&quot;1&quot;)))\">\n                        <companyApplicaitonName>\n                            <xsl:value-of select=\"$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/APP__NM\"/>\n                        </companyApplicaitonName>\n                    </xsl:if>\n                    <xsl:if test=\"not(($ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS/@xsi:nil=(&quot;true&quot;)) or ($ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS/@xsi:nil=(&quot;1&quot;)))\">\n                        <setupDate>\n                            <xsl:value-of select=\"$ev_authorizedapplication/payload/ns1:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS\"/>\n                        </setupDate>\n                    </xsl:if>\n                </companyApplications>\n            </object>\n        </createObject>\n    </xsl:template>\n</xsl:stylesheet>");
		        }else{
		            Concepts.CompanyApps companyApp = Instance.createInstance("xslt://{{/Concepts/CompanyApps}}<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:ns=\"http://www.tibco.com/xmlns/ae2xsd/2002/05/ae/FileAdapter/wire/FileAdapterConfigurationForWGPR\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" version=\"1.0\" exclude-result-prefixes=\"xsi xsd ns xsl\">\n    <xsl:output method=\"xml\"/>\n    <xsl:param name=\"ev_authorizedapplication\"/>\n    <xsl:template match=\"/\">\n        <createObject>\n            <object>\n                <xsl:attribute name=\"extId\">\n                    <xsl:value-of select=\"concat(&#xA;$ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__CEO__ID,\'.\',&#xA;$ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/COMPANY__USER__CEO__ID,\'.\',&#xA;$ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/APP__NM&#xA;)\"/>\n                </xsl:attribute>\n                <xsl:if test=\"not(($ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/APP__NM/@xsi:nil=(&quot;true&quot;)) or ($ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/APP__NM/@xsi:nil=(&quot;1&quot;)))\">\n                    <companyApplicaitonName>\n                        <xsl:value-of select=\"$ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/APP__NM\"/>\n                    </companyApplicaitonName>\n                </xsl:if>\n                <xsl:if test=\"not(($ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS/@xsi:nil=(&quot;true&quot;)) or ($ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS/@xsi:nil=(&quot;1&quot;)))\">\n                    <setupDate>\n                        <xsl:value-of select=\"$ev_authorizedapplication/payload/ns:WGPR__App__Authorization__DelimitedFileRecord/CREATED__TS\"/>\n                    </setupDate>\n                </xsl:if>\n            </object>\n        </createObject>\n    </xsl:template>\n</xsl:stylesheet>");
		            companyInfo.companyApplications[companyInfo.companyApplications@length]=companyApp;
		        }
		        if(XPath.evalAsBoolean("xpath://<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xpath>\n    <expr>$globalVariables/CEOPortalCache/CacheUpserts/turnOnCacheUpsertLogging=\'true\'</expr>\n    <namespaces>\n        <namespace URI=\"http://www.w3.org/2001/XMLSchema\" pfx=\"xsd\"/>\n    </namespaces>\n    <variables>\n        <variable>globalVariables</variable>\n    </variables>\n</xpath>")){
		           System.debugOut(Instance.serialize(companyInfo,false,"",""));
		        }
		}catch(Exception ex){
		     System.debugOut(XPath.evalAsString("xpath://<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xpath>\n    <expr>$ex/@stackTrace</expr>\n    <namespaces>\n        <namespace URI=\"http://www.w3.org/2001/XMLSchema\" pfx=\"xsd\"/>\n    </namespaces>\n    <variables>\n        <variable>ex</variable>\n    </variables>\n</xpath>"));
		}finally{
		Event.consumeEvent(ev_authorizedapplication);
		}
