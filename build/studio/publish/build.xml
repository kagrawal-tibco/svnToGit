<project name="featuresandbundles" default="publish">
	<target name="publish">
		<property name="pluginsDirecotry" value="${exportDirectory}/${buildId}/eclipse/plugins" />
		<delete dir="${exportDirectory}/studio-repo"/>
		<echo message="publishing repo for standard feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/standard" >
					 <features dir="${buildDirectory}/features" includes="com.tibco.cep.standard.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.diagramming_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.rt_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.xerces_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.security_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.sharedresource_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.sharedresource.ascon_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.sharedresource.hawk_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.application_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.cli_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.cluster.topology_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.debug.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.debug.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.mapper_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.mapper.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.streambase_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.tester.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.tester.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.ui.editors_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.ui.navigator_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.util_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.wizard.as_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.wizard.hawk_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.ws_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.thirdparty_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.tpcl_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.tra_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.ui_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for datamodeling feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/datamodeling" >
					 <features dir="${buildDirectory}/features" includes="com.tibco.cep.datamodeling.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.datamodeling_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dbconcept_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.ui.statemachine_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.datamodeling.common_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for decisionmanager feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/decisionmanager" >
				     <features dir="${buildDirectory}/features" includes="com.tibco.cep.decisionmanager.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.capabilities_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.decision.table.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.tree.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.tree.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.tree.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.rms.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.rms.ui_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for eventstreamprocessing feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/eventstreamprocessing" >
				     <features dir="${buildDirectory}/features" includes="com.tibco.cep.eventstreamprocessing.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.eventstreamprocessing_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.eventstreamprocessing.common_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for process feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/process" >
				     <features dir="${buildDirectory}/features" includes="com.tibco.cep.process.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.bpmn.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.bpmn.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.bpmn.rt_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.bpmn.ui_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for views feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/views" >
				     <features dir="${buildDirectory}/features" includes="com.tibco.cep.views.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.ui.chartcomponent_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.ui.statemachinecomponent_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.dashboard.rt_*.jar"	/>
				</eclipse.publish.featuresAndBundles>
				
				<echo message="publishing repo for streambase feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/streambase" >
					 <features dir="${buildDirectory}/features" includes="com.tibco.cep.studio.streambase.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.decision.table.ui_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.xerces_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.cli_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.common_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.core_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.mapper_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.studio.util_*.jar"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.thirdparty_*.jar"	/>
				     <bundles dir="${exportDirectory}/studio-site/plugins" includes="com.tibco.cep.rt_*.jar"	/>
				     <bundles dir="${exportDirectory}/studio-site/plugins" includes="com.tibco.cep.tpcl_*.jar"	/>
				     <bundles dir="${exportDirectory}/studio-site/plugins" includes="com.tibco.cep.tra_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="ca.odell.glazedlists_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="com.tibco.xml.xmodel_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="com.tibco.xml.mappermodel.emfapi_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="com.tibco.xml.mappermodel_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="com.tibco.xml.dictionaryapi_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="org.eclipse.nebula.widgets.nattable.core_1.6*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="org.eclipse.nebula.widgets.nattable.extension.glazedlists_1.6*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="org.eclipse.wst.wsdl_*.jar"	/>
				     <bundles dir="${exportDirectory}/eclipse/plugins" includes="javax.wsdl_1.5*.jar"	/>
				</eclipse.publish.featuresAndBundles>
		
				<echo message="publishing repo for liveview feature"/>
				<eclipse.publish.featuresAndBundles repository="file:${exportDirectory}/studio-repo/liveview" >
				     <features dir="${buildDirectory}/features" includes="com.tibco.cep.liveview.feature"	/>
				     <bundles dir="${pluginsDirecotry}" includes="com.tibco.cep.liveview_*.jar"	/>
				</eclipse.publish.featuresAndBundles>

				<echo message="publishing BE feature"/>
						<p2.composite.repository>
							<repository location="file:${exportDirectory}/studio-repo" />
							<add>
							    <repository location="file:${exportDirectory}/studio-repo/standard" />
							    <repository location="file:${exportDirectory}/studio-repo/datamodeling" />
							    <repository location="file:${exportDirectory}/studio-repo/decisionmanager" />
							    <repository location="file:${exportDirectory}/studio-repo/eventstreamprocessing" />
							    <repository location="file:${exportDirectory}/studio-repo/process" />
							    <repository location="file:${exportDirectory}/studio-repo/views" />
							    <repository location="file:${exportDirectory}/studio-repo/streambase" />
								<repository location="file:${exportDirectory}/studio-repo/liveview" />
							 </add>
						</p2.composite.repository>
	</target>
</project>