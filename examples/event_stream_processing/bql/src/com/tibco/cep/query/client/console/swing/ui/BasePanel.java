package com.tibco.cep.query.client.console.swing.ui;

import com.tibco.cep.query.client.console.swing.control.AboutBQLAction;
import com.tibco.cep.query.client.console.swing.control.NewQueryAction;
import com.tibco.cep.query.client.console.swing.control.QuitConsoleAction;
import com.tibco.cep.query.client.console.swing.model.OntologyModel;
import com.tibco.cep.query.client.console.swing.util.SwingUtil;
import javax.swing.JTabbedPane;
import javax.swing.JTree;

/**
 *
 * @author ksubrama
 */
public class BasePanel extends javax.swing.JFrame {
    private static final long serialVersionUID = 1L;
    private final NewQueryAction newQueryAction = new NewQueryAction(this);
    private final QuitConsoleAction quitConsoleAction = new QuitConsoleAction(this);
    private final AboutBQLAction aboutBQLAction = new AboutBQLAction(this);
    /** Creates new form BasePanel */
    public BasePanel() {
        initComponents();
        setExtendedState(MAXIMIZED_BOTH);
    }


    //////////////////////
    // Public methods.
    //////////////////////
    public JTabbedPane getTabbedPane() {
        return rightPanel;
    }

    public OntologyModel getOntologyModelAdapter() {
        return leftPanel.getOntologyTree().getModel();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jSplitPane1 = new javax.swing.JSplitPane();
        leftPanel = new com.tibco.cep.query.client.console.swing.ui.LeftPanel();
        rightPanel = new javax.swing.JTabbedPane();
        menuBar = new javax.swing.JMenuBar();
        queryMenu = new javax.swing.JMenu();
        newQuery = new javax.swing.JMenuItem();
        exitWindow = new javax.swing.JMenuItem();
        aboutMenu = new javax.swing.JMenu();
        aboutBQL = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("TIBCO BusinessEvents BQL Console");
        setBackground(java.awt.Color.white);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosed(java.awt.event.WindowEvent evt) {
                formWindowClosed(evt);
            }
        });

        jSplitPane1.setDividerLocation(300);
        jSplitPane1.setResizeWeight(0.4);
        jSplitPane1.setLeftComponent(leftPanel);

        rightPanel.setToolTipText("Query Window");
        jSplitPane1.setRightComponent(rightPanel);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jSplitPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 899, Short.MAX_VALUE)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jSplitPane1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 616, Short.MAX_VALUE)
        );

        menuBar.setBorder(null);
        menuBar.setToolTipText("Query Menu");
        menuBar.setAutoscrolls(true);

        queryMenu.setBackground(new java.awt.Color(153, 153, 153));
        queryMenu.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        queryMenu.setText("File");
        queryMenu.setToolTipText("Query Menu");

        newQuery.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_N, java.awt.event.InputEvent.CTRL_MASK));
        newQuery.setText("New Query");
        newQuery.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                newQueryActionPerformed(evt);
            }
        });
        queryMenu.add(newQuery);

        exitWindow.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_Q, java.awt.event.InputEvent.CTRL_MASK));
        exitWindow.setText("Quit");
        exitWindow.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exitWindowActionPerformed(evt);
            }
        });
        queryMenu.add(exitWindow);

        menuBar.add(queryMenu);

        aboutMenu.setText("About");

        aboutBQL.setText("About BQL Console");
        aboutBQL.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                aboutBQLActionPerformed(evt);
            }
        });
        aboutMenu.add(aboutBQL);

        menuBar.add(aboutMenu);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void newQueryActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_newQueryActionPerformed
        newQueryAction.addNewTab();
    }//GEN-LAST:event_newQueryActionPerformed

    private void exitWindowActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_exitWindowActionPerformed
        quitConsoleAction.closeConsole();
    }//GEN-LAST:event_exitWindowActionPerformed

    private void formWindowClosed(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosed
        exitWindowActionPerformed(null);
    }//GEN-LAST:event_formWindowClosed

    private void aboutBQLActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_aboutBQLActionPerformed
        aboutBQLAction.showAboutDialog();
    }//GEN-LAST:event_aboutBQLActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem aboutBQL;
    private javax.swing.JMenu aboutMenu;
    private javax.swing.JMenuItem exitWindow;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JSplitPane jSplitPane1;
    private com.tibco.cep.query.client.console.swing.ui.LeftPanel leftPanel;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JMenuItem newQuery;
    private javax.swing.JMenu queryMenu;
    private javax.swing.JTabbedPane rightPanel;
    // End of variables declaration//GEN-END:variables

    public JTree getOntologyTree() {
        return leftPanel.getOntologyTree().getTree();
    }

    public void openNewQueryTab() {
        newQueryAction.addNewTab();
    }

}
