<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>     Rule Function invocation in BE API Mode

- TIBCO BusinessEvents&reg; Examples
</title>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="Content-Language" content="en-us" />
<link rel="Shortcut Icon" href="../../_resources/icon.gif" type="image/gif" />
<style type="text/css" media="all">@import "../../_resources/examples.css";</style>
<script type="text/javascript" src="../../_resources/examples.js" /></script>
<script type="text/javascript">
function InputData(alertId,nodeId,catId,tstamp) {
  //alert(alertId);
  this.alertId = alertId;
  this.nodeId = nodeId;
  this.catId = catId;
  this.tstamp = tstamp;

  this.getAlertId = function() {
	//alert(this.alertId);
    return this.alertId;
  };
  this.getNodeId = function() {
    return this.nodeId;
  };
  this.getCatId = function() {
    return this.catId;
  };
  this.getTimestamp = function() {
    return this.tstamp;
  };

 }

function buildForms() {
 var inputArray = [
	new InputData("1","Node1","Cat1","2004-11-16T02:00:01"),
	new InputData("2","Node2","Cat1","2004-11-16T02:00:02"),
	new InputData("3","Node1","Cat2","2004-11-16T02:00:03"),
	new InputData("4","Node1","Cat1","2004-11-16T02:00:03"),
	new InputData("5","Node1","Cat1","2004-11-16T02:00:04"),
	new InputData("6","Node1","Cat1","2004-11-16T02:00:07")
	];

 var form;
 SendEventForm.setServer("http://localhost:8106");

 for(var i=0;i<6;i++) {
	 var x = inputArray[i];
	 form = SendEventForm.get("postInputForm"+x.getAlertId());
	 form.setDestinationPath("/Channels/HTTPChannel/inputAlert");
	 form.setEventPath("/Events/InputAlertEvent");
	 form.addProperty("AlertId", x.getAlertId());
	 form.addProperty("NodeId", x.getNodeId());
	 form.addProperty("CategoryId", x.getCatId());
	 form.addProperty("Timestamp", x.getTimestamp());
	 form.build();
 }


}

function pause(millis)
 {
  var date = new Date();
  var curDate = null;
  do { curDate = new Date(); }
  while(curDate-date < millis);
}


function sendAll() {
	for(var i=1; i <= 6; i++) {
		//setTimeout('document.getElementById("postInputForm' + i + '").submit();',1000 * i);
		var x = document.getElementById("postInputForm"+i);
		x.submit();
		pause(1600);
	}
}

</script>
</head>
<body>


<h1>Rule Function Invocation in BE API Mode</h1>


<h2>Purpose of This Example</h2>

<p>This example demonstrates the capability to invoke rule functions from TIBCO BusinessEvents&reg; project with Java code. The scenario is that given rule function name and input parameters to that function; we can invoke the same from plain Java code</p>

<h2>How to Run the Example</h2>
<ol>


<li>
<p>Open the project RFAPI using TIBCO BusinessEvents Studio. </p>
</li>
<li>
<p>Using the Project->Build Enterprise Archive command, create an EAR file named RFAPI.ear' in
the directory
<i>BE_HOME/examples/standard/RuleFunctionAPI/RFAPI/bin</i> <br>
[Note: You may have to change the value of File Location.] </p>
</li>
<li>
<p>Update the various paths, in the following file, to match your environment:
<i>BE_HOME/examples/standard/RuleFunctionAPI/RuleFunction/project/bin/setenv.bat</i> <br>
Then, execute the setenv.bat</p>
</li>
<li>
<p>Compile the API program by running compile.bat:
<i>BE_HOME/examples/standard/RuleFunctionAPI/RuleFunction/project/bin/RFAPIcompile.bat</i> </p>
</li>
<li>
<p>Run the API program by running run.bat:
<i>BE_HOME/examples/standard/RuleFunctionAPI/RuleFunction/project/bin/RFAPIrun.bat</i> <br><br>
Note: You can change the rule function and data input by changing the parameters  FUNCTION_NAME and DATA_INPUT : <br>
For example:<br>
SET FUNCTION_NAME=/RuleFunctions/testPrint <br>
SET DATA_INPUT=  1 </p>
</li>
<li>
<p>Observe the results in the output of the run.bat command. You will see the data input parameter is successfully passed</p>
</li>




<div class="footer">
<p>TIBCO BusinessEvents&reg; 5.6<br />
Copyright&copy; 2004-2019 TIBCO Software Inc. All rights reserved.</p>
</div>
</body>
</html>
