<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()" verticalScrollPolicy="off">
	<mx:Style source="assets/styles/CoreStyles.css"/>
	<mx:Script>
		<![CDATA[
			import com.tibco.be.views.user.components.pagesetselector.BasicPageSetRowRenderer;
			import mx.containers.Canvas;
			import mx.core.ScrollPolicy;
			import mx.controls.Label;
			import mx.containers.VBox;
			import mx.containers.HDividedBox;
			import mx.containers.Panel;
			import com.tibco.be.views.user.components.pagesetselector.BEVPageSetSelectorDataProvider;
			import com.tibco.be.views.user.components.pagesetselector.BEVPageSetRowRenderer;
			import com.tibco.be.views.ui.containers.ButtonScrollList;
			
			private var tmpConfig:XML = 
				<pagesetselectormodel componentid="MAL:3C6F3A2C6D6268673672606F32610504" componentname="PSC_Runtime_Template_Component" componenttype="PageSelectorComponent">
  <actionconfig disabled="false">
    <text>ROOT</text>
  </actionconfig>
  <pagesetselectorconfig backgroundcolor="FFFFFF" componentid="MAL:3C6F3A2C6D6268673672606F32610504">
    <pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 1</title>
      <tooltip>Click to load Item 1</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 2</title>
      <tooltip>Click to load Item 2</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 3</title>
      <tooltip>Click to load Item 3</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 4</title>
      <tooltip>Click to load Item 4</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 5</title>
      <tooltip>Click to load Item 5</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 6</title>
      <tooltip>Click to load Item 6</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 7</title>
      <tooltip>Click to load Item 7</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 8</title>
      <tooltip>Click to load Item 8</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 9</title>
      <tooltip>Click to load Item 9</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 10</title>
      <tooltip>Click to load Item 10</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 11</title>
      <tooltip>Click to load Item 11</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 12</title>
      <tooltip>Click to load Item 12</tooltip>
    </pagesetrowconfig>
	<pagesetrowconfig pagesetid="1D938429-18C2-135D-2A41-D24C3CDB3A6C">
      <title>Item 13</title>
      <tooltip>Click to load Item 13</tooltip>
    </pagesetrowconfig>
  </pagesetselectorconfig>
</pagesetselectormodel>;
			
			private function init():void{
				var internalList:ButtonScrollList = new ButtonScrollList();
			
				var pagesetrowconfigs:XMLList = tmpConfig..pagesetrowconfig;
				var _columnconfigs:Array = extractColumnConfigs(pagesetrowconfigs);
				
				var itemRendererFactory:ClassFactory = new ClassFactory(BasicPageSetRowRenderer);
//				itemRendererFactory.properties = {columnConfigs:_columnconfigs};
				internalList.setListItemRenderer(itemRendererFactory); 
				
				internalList.dataProvider = new BEVPageSetSelectorDataProvider(pagesetrowconfigs);
				internalList.percentWidth = 100;
				internalList.percentHeight = 100;
				
				var rootLayout:VBox = new VBox(); //mock BEVDashboard
				rootLayout.percentWidth = 100;
				rootLayout.percentHeight = 100;
				var header:Canvas = new Canvas();
				header.percentWidth = 100;
				header.height = 60;
				header.setStyle("backgroundColor", "green");
				rootLayout.addChild(header);				
				
				//Body content
				var panelContainer:Panel = new Panel();
				panelContainer.width = 200;
				panelContainer.percentHeight = 100;
				panelContainer.verticalScrollPolicy = ScrollPolicy.OFF;
				panelContainer.horizontalScrollPolicy = ScrollPolicy.OFF;
				panelContainer.addChild(internalList);
				
				var spaceFiller:VBox = new VBox();
				spaceFiller.percentWidth = 100;
				spaceFiller.percentHeight = 100;
				spaceFiller.setStyle("horizontalAlign", "center");
				spaceFiller.setStyle("verticalAlign", "middle");
				spaceFiller.setStyle("backgroundColor", "0xB0B0BA");
				var hello:Label = new Label();
				hello.text = "hello";
				spaceFiller.addChild(hello);
				
				var body:HDividedBox = new HDividedBox();
				body.percentWidth = 100;
				body.percentHeight = 100;
				body.addChild(panelContainer);
				body.addChild(spaceFiller);
				
				rootLayout.addChild(body);
				
				var footer:Canvas = new Canvas();
				footer.percentWidth = 100;
				footer.height = 25;
				footer.setStyle("backgroundColor", "blue");
				
				rootLayout.addChild(footer);
				
				addChild(rootLayout);
			}
			
			
			protected function extractColumnConfigs(pagesetrowconfigs:XMLList):Array {
				var columnConfigs:Array = new Array(null,null);
				for each (var pagesetrowconfig:XML in pagesetrowconfigs){
					for each (var columnconfig:XML in pagesetrowconfig.columnconfig){
						var idx:Number = new Number(columnconfig.@id) - 1;
						if(columnConfigs[idx] == null){
							columnConfigs[idx] = columnconfig;
						}
						else{
							if(parseFloat(columnconfig.@width) > parseFloat(columnConfigs[idx].@width)){
								columnConfigs[idx] = columnconfig;
							}
						}
					}
				}
				return columnConfigs;
			}
		]]>
	</mx:Script>
	
</mx:Application>
